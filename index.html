<!DOCTYPE HTML>
<html>
<head>
	
</head>>
<body>
  <div>
  	<header>Delphi7笔记</header>
  </div>
  <div>
  	<div><a>文件流操作数据</a></div>
  	<div><code>
  		function TfrmSchMain.WriteFile(fFileName: string; fData: DataType): Boolean;
        var
          TmpMem: TFileStream;
        begin
          Result := True;
          if FileExists(fFileName) then    		         // fFileName := ApplicationPath + DirectName + FileName
            DeleteFile(pchar(fFileName));
          TmpMem := TFileStream.Create(fFileName, fmOpenReadWrite or fmCreate);
          try                    
            try
              TmpMem.Position := 0;
              TmpMem.Write(fData, sizeof(fData));       //fData自定义类型
            except
              Result := False;
            end;
          finally
            TmpMem.Free;
          end;
        end;

        function TfrmSchMain.ReadFile(fFileName: string; fData: DataType): Boolean;
        var
          TmpMem: TFileStream;
        begin
          Result := True;
          if FileExists(fFileName) then    		         // fFileName := ApplicationPath + DirectName + FileName
          begin
            TmpMem := TFileStream.Create(fFileName, fmOpenRead);
            try                    
              try
                TmpMem.Position := 0;
                TmpMem.Read(fData, sizeof(fData));      //fData自定义类型
              except
                Result := False;
              end;
            finally
              TmpMem.Free;
          end;
        end;
  	</code></div>
  </div>
</body>
</html>